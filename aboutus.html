<!DOCTYPE html>
<html>
  <head>
    <title>About Us</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  </head>
  <body>
    <div class="container col-7 col-12 col-md-7">
      <div class="navbar d-md-block">
        <h1>Tip Calculator</h1>
        <nav>
          <ul>
            <li><a href="/">HOME</a></li>
            <li><a href="http://127.0.0.1:5500/aboutus.html">ABOUT</a></li>
            <div>
              <button class="btn btn-mode" id="darkModeBtn">Dark Mode</button>
              <button class="btn d-none btn-mode" id="lightModeBtn">Light Mode</button>
            </div>
          </ul>
        </nav>
      </div>
      <hr />
      <div class="container">
        <div class="col">
          <h1>About Us</h1>
        </div>
        <p class="h3">
          Hello, this is a tip calculator for users to use when they have a bill that they need to calculate. you have an input range where you can change how much % you want to give to the waiter. You can also the custom tip where you just add a
          specific $. Theres a function where you can divide it with the party size of your group and it shows you how much per person it is. In the future I obviously want the css to look a lot better. The website is not responsive yet to specific
          devices. And I want to add a share button where it will text/dm in any social media to send a reminder to whoever was in your party that you owe X amount of money.
        </p>
        <p class="h3">
          You can also make it a custom message just in case, the party member had to you owe more from a different occasion. This will be useful because there are times when you ask them for money but they milk it till the end of the night or even
          next week or they dont even pay you at all. so a text message reminder will increase the probability of them sending the money on spot as they are already on their phones.
        </p>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="/calculator.js"></script>

    <script>
      document.getElementById("darkModeBtn").addEventListener("click", backgroundChange);
      document.getElementById("lightModeBtn").addEventListener("click", backgroundChange);
      const tipRange = document.getElementById("tipPercent");
      const tipOutput = document.getElementById("tipOutput");
      const totalBill = document.getElementById("totalBill");
      const totalAmount = document.getElementById("totalAmount");
      const tipAmount = document.getElementById("tipAmount");
      const tipCustomPercent = document.getElementById("tipCustomPercent");
      const tipCustomBtn = document.getElementById("tipCustomBtn");
      const partySize = document.getElementById("partySize");
      const totalPerPerson = document.getElementById("totalPerPerson");

      const isDarkMode = localStorage.getItem("darkMode");
      if (isDarkMode === "true") {
        enableDarkMode();
      }

      function backgroundChange() {
        console.log("clicked");
        var element = document.body;
        element.classList.toggle("dark-mode");
        const isDarkMode = element.classList.contains("dark-mode");
        localStorage.setItem("darkMode", isDarkMode);

        toggleButtonVisibility();
      }

      function enableDarkMode() {
        var element = document.body;
        element.classList.add("dark-mode");

        toggleButtonVisibility();
      }

      function toggleButtonVisibility() {
        $("#darkModeBtn").toggleClass("d-none");
        $("#lightModeBtn").toggleClass("d-none");
      }

      function tipValueChange() {
        tipOutput.value = tipRange.value;
      }

      let totalAmountValue = 0.0;

      function addTotalAmount() {
        const changeTipToDecimal = parseFloat(tipOutput.value) / 100;
        const total = parseFloat(totalBill.value) + parseFloat(totalBill.value) * changeTipToDecimal;
        totalAmount.textContent = total.toFixed(2);
        totalAmountValue = total;
      }

      function addTotalPerPersonAmount() {
        const total = totalAmountValue / parseFloat(partySize.value);
        totalPerPerson.textContent = total.toFixed(2);
      }

      function totalTipAmount() {
        const changeTipToDecimal = parseFloat(tipOutput.value) / 100;
        const additionalTip = parseFloat(totalBill.value) * changeTipToDecimal;
        tipAmount.textContent = additionalTip.toFixed(2);
      }

      function addCustomTip() {
        const customTipAmount = parseFloat(tipCustomPercent.value);
        const customTipPercent = (customTipAmount / parseFloat(totalBill.value)) * 100;
        tipAmount.textContent = customTipAmount.toFixed(2);
        tipOutput.value = customTipPercent.toFixed(2);
        const total = parseFloat(totalBill.value) + customTipAmount;
        totalAmount.textContent = total.toFixed(2);
        totalAmountValue = total;
        addTotalPerPersonAmount();
      }

      tipRange.addEventListener("input", tipValueChange);
      tipRange.addEventListener("input", addTotalAmount);
      tipRange.addEventListener("input", totalTipAmount);
      totalBill.addEventListener("input", addTotalAmount);
      totalBill.addEventListener("input", addTotalPerPersonAmount);
      tipRange.addEventListener("input", addTotalPerPersonAmount);
      partySize.addEventListener("input", addTotalPerPersonAmount);
      tipCustomBtn.addEventListener("click", addCustomTip);
    </script>
  </body>
</html>
